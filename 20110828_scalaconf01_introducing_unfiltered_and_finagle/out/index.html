<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>20110828_ScalaConf01_introducing_Unfiltered_and_Finagle</title>
        <link href="assets/css/show.css" type="text/css" rel="stylesheet" />
        <link href="assets/css/prettify.css" type="text/css" rel="stylesheet" />
        <script type="text/javascript" src="assets/js/jquery.min.js"></script>
        <script type="text/javascript" src="assets/js/show.js"></script>
        <script type="text/javascript" src="assets/js/prettify/prettify.js"></script>
        <script type="text/javascript" src="assets/js/prettify/lang-apollo.js"></script><script type="text/javascript" src="assets/js/prettify/lang-css.js"></script><script type="text/javascript" src="assets/js/prettify/lang-hs.js"></script><script type="text/javascript" src="assets/js/prettify/lang-lisp.js"></script><script type="text/javascript" src="assets/js/prettify/lang-lua.js"></script><script type="text/javascript" src="assets/js/prettify/lang-ml.js"></script><script type="text/javascript" src="assets/js/prettify/lang-proto.js"></script><script type="text/javascript" src="assets/js/prettify/lang-scala.js"></script><script type="text/javascript" src="assets/js/prettify/lang-sql.js"></script><script type="text/javascript" src="assets/js/prettify/lang-sql.js"></script><script type="text/javascript" src="assets/js/prettify/lang-vb.js"></script><script type="text/javascript" src="assets/js/prettify/lang-vhdl.js"></script><script type="text/javascript" src="assets/js/prettify/lang-wiki.js"></script><script type="text/javascript" src="assets/js/prettify/lang-yaml.js"></script><link href="css/custom.css?1314513775434" type="text/css" rel="stylesheet" />
      <script type="text/javascript"><!--
        window.onload=function() { prettyPrint(); };
      --></script>
      </head>
      <body>
        <div id="slides">
          <div id="reel">
            <div class="content" id="slide-0">
       <div class="container"><p><strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
<em>ᙢᙲᘃᘓᘣᘳᙃᙓᙣᙳᘄᘔᘤᘴᙄᙔᙤᙴᘅᘕᘥ</em>
<span class="comment">ᙕᙥᙵᘆᘖᘦᘶᙆᙖᙦᙶᚆᘇᘗᘧᘷᙇᙗᙧ,ᘈᘘᘨ</span>
ᘸᙈᙘᙨᘉᘙᘩᘹᙉᙙᙩᘊᘚᘪᘺᙊᙚᙪᘋᘛᘫᘻᙋ
<span class="comment">ᙛᙫᘌᘜᘬᘼᙌᙜᙬᘍᘝᘭᘽᙍᙝ᙭ᘎᘞᘮᘾᙎᙞ᙮ᘏᘟ</span>
<em>ᘯᘿᙏᙟᙯᔀᔐᔠᔰᕀᕐᕠᕰᖀᖐᖠᖰᗀᗐᗠᗰᔁᔑᔡᔱ</em>
<strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
</p></div>
      </div><div class="content" id="slide-1">
       <div class="container"><p>ᕨᒈᖃᓘᕋᑉᒬᖊᙣᑒᒑᐭᕙᓬᒡᐑᓋᖥᓛᖁᒿᑈ
ᒮᗯᘻᕕᑁᖕᐎᑨᒬᘑᒠᘑᕶᒇᖝᑌᘪᒨᙔᕕ
</p><p><a href="http://twitter.com/yuroyoro" >@yuroyoro</a>
</p></div>
      </div><div class="content" id="slide-2">
       <div class="container"><p><span>ᑁᓠᘋᒊᔚᗚᙦᕑᑖᕎᙲᕯ</span>
ᕯᙢᕤᑳᘘᕿᘑᐈᙝᐡᙁ
<strong>ᗦᑡᗋᘊᖵᘺᓉᔊᗎᗉᙩ</strong>
<em>ᒷᐉᐶᕽᔅᙇᐾᔴ</em>
</p></div>
      </div><div class="content" id="slide-3">
       <div class="container"><p>ごぶぁあひゃうううううぅぅ！！ぎょーーー、らぬぃ?
ぬふぇーっはにゃうっはー！！！！おん？
にゃう！！！
ごるぁ…きぇーっぱぁっあひぎゃっぱぁぁーーーっあひゃあひゃあぁぁー…もるぽっ…ん！よぅ…くん！！
んっあ…
もるすぁあぃぱぎゃあぃっほぉおんっううわぁあ…ん！！！！！ぎゃー！！！
ほにょぱ?
きぇ。
ふぅうううふぬぇ!………あ、ごぶぁぁっきゃっきゅん、
ぎぃ!っほぉおんはにょーっー!にゃっあっぁ?
</p></div>
      </div><div class="content" id="slide-4">
       <div class="container"><p>＼('.')~ Hi, I'm<br/>
<a href="http://twitter.com/yuroyoro" >@yuroyoro</a>
</p></div>
      </div><div class="content" id="slide-5">
       <div class="container"><p>ヽ(*ﾟдﾟ)ノ＜ I'd
</p><p>Talk about latest fashioned <strong>Scala's</strong> <em>Framework/Toolkit</em>
</p></div>
      </div><div class="content" id="slide-6">
       <div class="container"><h2>Menu</h2><ul><li><a href="https://github.com/n8han/Unfiltered" >Unfiltered</a>
</li><li><a href="https://github.com/twitter/finagle" >Finagle</a>
</li><li><a href="https://github.com/jdegoes/blueeyes" >BlueEyes</a>
</li></ul></div>
      </div><div class="content" id="slide-7">
       <div class="container"><p>There are ...
</p></div>
      </div><div class="content" id="slide-8">
       <div class="container"><p><span class="comment">NOT</span> MVC
</p></div>
      </div><div class="content" id="slide-9">
       <div class="container"><p><span class="comment">NOT</span> FullStack
</p></div>
      </div><div class="content" id="slide-10">
       <div class="container"><p><em>Thin</em> &amp; <strong>Simple</strong>
</p></div>
      </div><div class="content" id="slide-11">
       <div class="container"><p><strong>Asynchronous</strong>
</p></div>
      </div><div class="content" id="slide-12">
       <div class="container"><p><strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
<em>ᙢᙲᘃᘓᘣᘳᙃᙓᙣᙳᘄᘔᘤᘴᙄᙔᙤᙴᘅᘕᘥ</em>
<span class="comment">ᙕᙥᙵᘆᘖᘦᘶᙆᙖᙦᙶᚆᘇᘗᘧᘷᙇᙗᙧ,ᘈᘘᘨ</span>
ᘸᙈᙘᙨᘉᘙᘩᘹᙉᙙᙩᘊᘚᘪᘺᙊᙚᙪᘋᘛᘫᘻᙋ
<span class="comment">ᙛᙫᘌᘜᘬᘼᙌᙜᙬᘍᘝᘭᘽᙍᙝ᙭ᘎᘞᘮᘾᙎᙞ᙮ᘏᘟ</span>
<em>ᘯᘿᙏᙟᙯᔀᔐᔠᔰᕀᕐᕠᕰᖀᖐᖠᖰᗀᗐᗠᗰᔁᔑᔡᔱ</em>
<strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
</p></div>
      </div><div class="content" id="slide-13">
       <div class="container"><h2><em>Unfiltered</em></h2><p><a href="https://github.com/n8han/Unfiltered" ><em class="hc">https://github.com/n8han/Unfiltered</em></a>
</p></div>
      </div><div class="content" id="slide-14">
       <div class="container"><p>From <span>NYC</span><br/>
<a href="http://twitter.com/n8han" >@n8han</a>
</p></div>
      </div><div class="content" id="slide-15">
       <div class="container"><p>ヽ(*ﾟдﾟ)ノ＜
</p><p>A <strong>toolkit</strong> for servicing <em>HTTP requests</em>
</p></div>
      </div><div class="content" id="slide-16">
       <div class="container"><p><span class="comment">NOT</span> <strong>Framework</strong>
</p></div>
      </div><div class="content" id="slide-17">
       <div class="container"><h3>Who’s Using <em>Unfiltered</em>?</h3><ul><li>Remember The Milk
</li><li>Novus
</li><li>Trust Metrics
</li><li>... and more!
</li></ul></div>
      </div><div class="content" id="slide-18">
       <div class="container"><p>ヽ(*ﾟдﾟ)ノ＜
</p><p>This Presentation made by <span>Picture-show</span> based <em>Unfiltered</em> .
</p></div>
      </div><div class="content" id="slide-19">
       <div class="container"><h2>CONCEPT</h2><ul><li><strong>&hearts;</strong>'s <em>pattern matching</em>
</li><li><strong>&hearts;</strong>'s <em>combinator</em>
</li><li>loosly coupled <em>components</em>
</li><li><em>embed</em> servers
</li></ul></div>
      </div><div class="content" id="slide-20">
       <div class="container"><p><em>Request</em>
</p><p><strong>Pattern Matching</strong>
</p></div>
      </div><div class="content" id="slide-21">
       <div class="container"><h3>METHOD, PATH</h3><div class='hc'>
<p class="sub comment">GET /hello/yuroyoro</p>
<span>case</span> <strong>GET</strong>(<em>Path</em>(Seg("hello"::name::Nil))) =>
  ResponseString(
    "ヽ(\*ﾟдﾟ)ノ＜  Hello, %s" format name )
</div>
</div>
      </div><div class="content" id="slide-22">
       <div class="container"><h3>Parameters</h3><div class="hc">
<p class="sub comment">GET /hello?name=yuroyoro</p>
<span>case</span> <strong>GET</strong>(<em>Params</em>(params))) =>
  ResponseString(
    "ヽ(\*ﾟдﾟ)ノ＜  Hello,  %s" format params("name").head )
</div>
</div>
      </div><div class="content" id="slide-23">
       <div class="container"><h3>Basic Auth</h3><div class="hc">
<em>BasicAuth</em>(<strong>creds</strong>, _ ) => creds <span>match</span> {
  <span>case</span> ("jane", "j@n3") => <span class="comment">// jane stuff</span>
  <span>case</span> ("jim", "j1m") =>   <span class="comment">// jim stuff</span>
  <span>case</span> _ =>                <span class="comment">// default stuff</span>
}
</div>
</div>
      </div><div class="content" id="slide-24">
       <div class="container"><h3>ContentType</h3><div class="hc">
<em>Accepts</em>(<strong>fmt</strong>, _ ) => fmt <span>match</span> {
  <span>case</span> 'json => <span class="comment">// json stuff</span>
  <span>case</span> 'xml =>  <span class="comment">// xml stuff</span>
  <span>case</span> _ =>     <span class="comment">// otherwise default stuff</span>
}
</div>
</div>
      </div><div class="content" id="slide-25">
       <div class="container"><h3><em>Response</em> <strong>Combinators</strong></h3></div>
      </div><div class="content" id="slide-26">
       <div class="container"><h1><strong>~&gt;</strong></h1></div>
      </div><div class="content" id="slide-27">
       <div class="container"><div class='hc small'>
<span>import</span> javax.servlet.http.{HttpServletResponse => <em>R</em>}
<span>type</span> ResponseFunction = <em>R</em> => <em>R</em>
<span>trait</span> Responder <span>extends</span> ResponseFunction {
  <span>def</span> respond(res: R)
  <span>def</span> <strong>~></strong> (that: ResponseFunction) = <span>new</span> ChainResponse(
    this andThen that
  )
}
<span>class</span> ChainResponse(f: ResponseFunction) <span>extends </span>Responder {
  <span>def</span> respond(res: R) = f(res)
}
</div>
</div>
      </div><div class="content" id="slide-28">
       <div class="container"><p><em>ResponseFunction</em>
</p><p><strong>~&gt;</strong>
</p><p><em>ResponseFunction</em>
</p></div>
      </div><div class="content" id="slide-29">
       <div class="container"><p><em>(R =&gt; R)</em> <strong>~&gt;</strong> <em>(R =&gt; R)</em>
</p></div>
      </div><div class="content" id="slide-30">
       <div class="container"><div class='hc'>
<span class="comment">// Response Body</span>
<em>ResponseString</em>("Hello")
</div>
</div>
      </div><div class="content" id="slide-31">
       <div class="container"><div class='hc'>
<span class="comment">// Response Body</span>
<em>ResponseString</em>("Hello")
<strong>~></strong>
<span class="comment">// 200 OK</span>
<em>OK</em> <span class="comment"> // or Status(200) </span>
</div>
</div>
      </div><div class="content" id="slide-32">
       <div class="container"><div class='hc'>
<span class="comment">// Response Body</span>
<em>ResponseString</em>("Hello")
<strong>~></strong>
<span class="comment">// 200 OK</span>
<em>OK</em> <span class="comment"> // or Status(200) </span>
<strong>~></strong>
<span class="comment">// Content-Type</span>
<em>PlainTextContent</em>
</div>
</div>
      </div><div class="content" id="slide-33">
       <div class="container"><div class='hc'>
<span class="comment">// Response Body</span>
<em>ResponseString</em>("Hello")
<strong>~></strong>
<span class="comment">// 200 OK</span>
<em>OK</em> <span class="comment"> // or Status(200) </span>
<strong>~></strong>
<span class="comment">// Content-Type</span>
<em>PlainTextContent</em>
<strong>~></strong>
<span class="comment">// other headers </span>
<em>ResponseHeader</em>("x-runtime",
  TimeFrom(start) :: Nil)
</div>
</div>
      </div><div class="content" id="slide-34">
       <div class="container"><h3><span>Plans</span> &amp; <em>Intent</em></h3></div>
      </div><div class="content" id="slide-35">
       <div class="container"><p><em>Intent</em> is a <strong>PartialFunction.</strong>
</p><div class='hc small'>
<span>val</span> hello = {
  <span>case</span> GET(Path(Seg("hello"::name::Nil))) =>
    OK ~> ResponseString("('.')/~ Hello,  %s" format name )
  <span>case</span> _ =>
    MethodNotAllowed _> ResponseString("GET only.")
}
</div>
</div>
      </div><div class="content" id="slide-36">
       <div class="container"><p><span>Plan</span> binds a <em>Intents</em> to server (Netty/Jetty...).
</p><div class='hc small'>
<span class="comment">// This plan binds to Servlet Filter.</span>
<span>object</span> Echo
  <span>extends</span> unfiltered.<strong>filter</strong>.Plan {
  <span>def</span> intent = {
    <span>case</span> Path(Seg(p :: Nil)) => ResponseString(p)
  }
}
</div>
</div>
      </div><div class="content" id="slide-37">
       <div class="container"><h3><strong>Bindings</strong> &amp; <em>Servers</em></h3></div>
      </div><div class="content" id="slide-38">
       <div class="container"><p><strong>Binding</strong> is implementaion of Request/Response interface.
</p><ul><li>Servlet Filters (unfiltered-filter)
</li><li>Netty Channels (unfiltered-netty)
</li></ul></div>
      </div><div class="content" id="slide-39">
       <div class="container"><p><em>Server modules</em> define runnable servers.(optional)
</p><ul><li>unfiltered-jetty
</li><li>unfiltered-jetty-ajp
</li><li>unfiltered-netty-server
</li></ul></div>
      </div><div class="content" id="slide-40">
       <div class="container"><h3>Simple Key-Value Strore</h3></div>
      </div><div class="content" id="slide-41">
       <div class="container"><div class='hc small'>
<span>import</span> unfiltered.request.\_
<span>import</span> unfiltered.response.\_
<span>object</span> SillyStore <span>extends</span> unfiltered.filter.<span class="cy">Plan</span>{
  @volatile private var store = Map.empty[String, Array[Byte]]
  <span>def</span> <span class="cy">intent</span> = {
    <span>case</span> req @ <em>Path</em>(<em>Seg</em>("record" :: id :: Nil)) => req <span>match</span> {
      <span>case</span> <em>GET</em>(_) =>
        store.get(id).map(ResponseBytes).getOrElse {
          <strong>NotFound</strong> ~> <strong>ResponseString</strong>("No record: " + id)
        }
      <span>case</span> <em>PUT</em>(_) =>
        SillyStore.synchronized {
          store = store + (id -> Body.bytes(req))
        }
        <strong>Created</strong> ~> <strong>ResponseString</strong>("Created record: " + id)
      <span>case</span> _ =>
        <strong>MethodNotAllowed</strong> ~> <strong>ResponseString</strong>("Must be GET or PUT")
    }
  }
}
</div>
</div>
      </div><div class="content" id="slide-42">
       <div class="container"><span class="l or">DEMO</span>
</div>
      </div><div class="content" id="slide-43">
       <div class="container"><p><strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
<em>ᙢᙲᘃᘓᘣᘳᙃᙓᙣᙳᘄᘔᘤᘴᙄᙔᙤᙴᘅᘕᘥ</em>
<span class="comment">ᙕᙥᙵᘆᘖᘦᘶᙆᙖᙦᙶᚆᘇᘗᘧᘷᙇᙗᙧ,ᘈᘘᘨ</span>
ᘸᙈᙘᙨᘉᘙᘩᘹᙉᙙᙩᘊᘚᘪᘺᙊᙚᙪᘋᘛᘫᘻᙋ
<span class="comment">ᙛᙫᘌᘜᘬᘼᙌᙜᙬᘍᘝᘭᘽᙍᙝ᙭ᘎᘞᘮᘾᙎᙞ᙮ᘏᘟ</span>
<em>ᘯᘿᙏᙟᙯᔀᔐᔠᔰᕀᕐᕠᕰᖀᖐᖠᖰᗀᗐᗠᗰᔁᔑᔡᔱ</em>
<strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
</p></div>
      </div><div class="content" id="slide-44">
       <div class="container"><h1><em>Finagle</em></h1><p><a href="https://github.com/twitter/finagle" ><em class="hc">https://github.com/twitter/finagle</em></a>
</p></div>
      </div><div class="content" id="slide-45">
       <div class="container"><p><strong>Asynchronous</strong>
</p><p><em>RPC</em>
</p><span class="cy">Server/Client</span>
<p><span>Framework</span>.
</p></div>
      </div><div class="content" id="slide-46">
       <div class="container"><p><strong>Finagle</strong> has been used in <em>twitter search</em> backends.
</p></div>
      </div><div class="content" id="slide-47">
       <div class="container"><p><img  src="Finagle/Oppai.png" alt="おっぱい" />
</p></div>
      </div><div class="content" id="slide-48">
       <div class="container"><h3><strong>Finagle</strong> on</h3><p><img  src="Finagle/FinagleRelationship.png" alt="Relationship between your RCP client or server, Finagle, Netty, and Java Libraries " />
</p><p><strong>JVM</strong> / <em>NIO</em> / <span>Netty</span>
</p></div>
      </div><div class="content" id="slide-49">
       <div class="container"><h3><strong>Protocol Independent</strong></h3><ul><li>HTTP/HTTPS
</li><li>HTTP streaming (Comet)
</li><li>Thrift
</li><li>memcached
</li><li>... more
</li></ul></div>
      </div><div class="content" id="slide-50">
       <div class="container"><h3><strong>Features</strong></h3><ul><li>Connection Pooling
</li><li>Load Balancing
</li><li>Failure Detection
</li><li>Failover/Retry
</li><li>Distributed Tracing (a la Dapper)
</li><li>Service Discovery (e.g.,  via Zookeeper)
</li><li>Rich Statistics
</li><li>Native OpenSSL Bindings
</li></ul></div>
      </div><div class="content" id="slide-51">
       <div class="container"><h3><strong>Primitive</strong> Objects</h3><ul><li><strong>Futures</strong>
</li><li><em>Services</em>
</li><li><span>Filters</span>
</li><li><span class="cy">Codecs</span>
</li></ul></div>
      </div><div class="content" id="slide-52">
       <div class="container"><h2><strong>Futures</strong></h2><code>
<span>class</span> Future [+A] <span>extends</span> TryLike[A, Future] {
  <span>def</span> apply () : A
}
</code>
</div>
      </div><div class="content" id="slide-53">
       <div class="container"><p><em>abstraction</em> for all <strong>asynchronous computation</strong>.
</p><code>
<span>val</span> req: HttpRequest =
  <span>new</span> DefaultHttpRequest(HTTP_1_1, GET, "/")
<span>val</span> <em>resFuture: Future</em>[HttpResponse] = client(req)
</code>
</div>
      </div><div class="content" id="slide-54">
       <div class="container"><p>register a <em>callbacks</em>.
</p><code>
<em>resFuture</em> <strong>onSuccess</strong> { responseFuture =>
  println(responseFuture)
} <strong>onFailure</strong> { exception =>
  println(exception)
}
</code>
</div>
      </div><div class="content" id="slide-55">
       <div class="container"><p><em>callbacks</em> will be invoked <strong>asynchronously</strong>.
</p></div>
      </div><div class="content" id="slide-56">
       <div class="container"><p><strong>combine</strong> <em>Futures</em>.
</p><code>
<span>val</span> authenticatedUser: Future[User] =
  User.authenticate(email, password)
<br/>
<span>val</span> lookupTweets: Future[Seq[Tweet]] =
  authenticatedUser <strong>flatMap</strong> { user =>
    Tweet.findAllByUser(user)
  }
</code>
</div>
      </div><div class="content" id="slide-57">
       <div class="container"><p>using <strong>for expression</strong> instead of flatMap.
</p><code>
<span>for</span> {
  user <- User.authenticate(email, password)
  tweets <- Tweet.findAllByUser(user)
} yield tweets
</code>
</div>
      </div><div class="content" id="slide-58">
       <div class="container"><p>other features.
</p><ul><li><em>Timeouts</em>
<code class="small">resFuture.<strong>within(1.second)</strong> onSuccess { response => ... }</code>
</li><li><p><em>Promises</em>
</p><code>can be both read and written.</code>
</li><li><p><em>Future Pools</em>
</p><code>makes blocking operation asynchronous.</code>
</li></ul></div>
      </div><div class="content" id="slide-59">
       <div class="container"><h2><strong>Services</strong></h2><code>
<span>class</span> <strong>Service</strong> [-Req, +Rep]
  <span>extends</span> (Req) => Future[Rep] {
  <span>def</span> apply (request: Req) : Future[Rep]
}
</code>
</div>
      </div><div class="content" id="slide-60">
       <div class="container"><p><strong>asynchronous function</strong>
</p><p>from <span>Request</span>
</p><p>to <em>Future</em>
</p></div>
      </div><div class="content" id="slide-61">
       <div class="container"><code>
<span>val</span> service = <span>new</span> <strong>Service</strong>[<span>HttpRequest</span>, <em>HttpResponse</em>] {
  <span>def</span> apply(request: <span>HttpRequest</span>) = {
    <span>val</span> response = <span>new</span> DefaultHttpResponse(HTTP_1_1, OK)
    response.setContent(copiedBuffer("hello world", UTF_8))
    <em>Future.value(response)</em>
  }
}
</code>
</div>
      </div><div class="content" id="slide-62">
       <div class="container"><p>Building <em>Server</em> from <strong>Service</strong>.
</p><code>
<span>val</span> <em>server: Server</em> = ServerBuilder()
  .codec(Http())
  .bindTo(new InetSocketAddress(8080))
  .name("SimpleHttpServer")
  .build(<strong>service</strong>)
</code>
</div>
      </div><div class="content" id="slide-63">
       <div class="container"><p>Building <em>Client</em> from <strong>Service</strong>.
</p><code>
<span>val</span> <em>client</em>: <strong>Service[HttpRequest, HttpResponse]</strong>> =
  ClientBuilder()
    .codec(Http())
    .hosts(address)
    .build()
</code>
</div>
      </div><div class="content" id="slide-64">
       <div class="container"><h2><strong>Filters</strong></h2><code class="small">
<span>class</span> <strong>Filter</strong> [-ReqIn, +RepOut, +ReqOut, -RepIn]
  <span>extends</span> (ReqIn, <em>Service</em>[ReqOut,  RepIn]) => <em>Future</em>[RepOut] {
  <span>def</span> apply (request:ReqIn,
      service:<em>Service</em>[ReqOut, RepIn]) : <em>Future</em>[RepOut]
}
</code>
</div>
      </div><div class="content" id="slide-65">
       <div class="container"><p>acts as a <strong>decorator/transformer</strong> of a <em>Service</em>.
</p></div>
      </div><div class="content" id="slide-66">
       <div class="container"><code class="small">
<span>val</span> authorize =
  <span>new</span> <strong>SimpleFilter</strong>[HttpRequest, HttpResponse] {
  <span>def</span> apply(
    request:<em>HttpRequest</em>,
    continue:<em>Service</em>[HttpRequest, HttpResponse]
  ) = {
    <span>if</span> ("open sesame" == request.getHeader("Authorization")) {
      continue(request)
    } <span>else</span> {
      Future.value(
        <span>new</span> DefaultHttpResponse(HTTP_1_1, FORBIDDEN))
    }
  }
}
</code>
</div>
      </div><div class="content" id="slide-67">
       <div class="container"><p>define <em>service</em> with <strong>filters</strong>.
</p><code>
<span>val</span> service : Service[HttpRequest, HttpResponse] =
  <strong>authorize</strong> <span>andThen</span> <strong>otherFilter</strong> <span>andThen</span> <em>service</em>
</code>
</div>
      </div><div class="content" id="slide-68">
       <div class="container"><h2><strong>Codecs</strong></h2><code>
<span>trait</span> <strong>Codec</strong> [Req, Rep]
</code>
</div>
      </div><div class="content" id="slide-69">
       <div class="container"><p><em>encodes</em> and <em>decodes</em> wire protocols
</p><ul><li>HTTP/HTTPS
</li><li>Thrift
</li><li>memcached
</li><li>...
</li></ul></div>
      </div><div class="content" id="slide-70">
       <div class="container"><p>binds service on <em>HTTP</em>.
</p><code>
<span>val</span> <em>server: Server</em> = ServerBuilder()
  <strong>.codec(Http())</strong>
  .bindTo(new InetSocketAddress(8080))
  .name("SimpleHttpServer")
  .build(service)
</code>
</div>
      </div><div class="content" id="slide-71">
       <div class="container"><p>binds service on <em>Thrift</em>.
</p><code>
<span>val</span> <em>server: Server</em> = ServerBuilder()
  <strong>.codec(ThriftServerFramedCodec())</strong>
  .bindTo(new InetSocketAddress(8080))
  .name("SimpleHttpServer")
  .build(service)
</code>
</div>
      </div><div class="content" id="slide-72">
       <div class="container"><h2><strong>Servers</strong></h2><p><img  src="Finagle/Filters.png" alt="FiterChain" />
</p></div>
      </div><div class="content" id="slide-73">
       <div class="container"><p>RPC servers are built out of a <em>Service</em> and some <strong>Filter</strong> objects.
</p></div>
      </div><div class="content" id="slide-74">
       <div class="container"><h2>Threading Model</h2></div>
      </div><div class="content" id="slide-75">
       <div class="container"><p><strong>Event Loop</strong>
</p></div>
      </div><div class="content" id="slide-76">
       <div class="container"><p><span>while</span>(1){
</p></div>
      </div><div class="content" id="slide-77">
       <div class="container"><p><span>for</span>(;;){
</p></div>
      </div><div class="content" id="slide-78">
       <div class="container"><h3><span>IMPORTANT!!</span></h3><p>Finagle requires <strong>avoid blocking operation</strong> in the Finagle <em>event loop</em>
</p></div>
      </div><div class="content" id="slide-79">
       <div class="container"><p>Like <span class="cy">Node.js</span>
</p></div>
      </div><div class="content" id="slide-80">
       <div class="container"><p>But, <strong>Finagle's API</strong> provides your code <em>asynchronously</em>.
</p><ul><li><strong>Futures</strong>
</li><li><em>Services</em>
</li><li><span>Filters</span>
</li><li><span class="cy">Codecs</span>
</li></ul></div>
      </div><div class="content" id="slide-81">
       <div class="container"><p><img  src="Finagle/ThreadEx.png" alt="Threading" />
</p></div>
      </div><div class="content" id="slide-82">
       <div class="container"><p><img  src="Finagle/ThreadExNonBlockingServer.png" alt="Bolcking" />
</p></div>
      </div><div class="content" id="slide-83">
       <div class="container"><span class="l or">DEMO</span>
</div>
      </div><div class="content" id="slide-84">
       <div class="container"><p><strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
<em>ᙢᙲᘃᘓᘣᘳᙃᙓᙣᙳᘄᘔᘤᘴᙄᙔᙤᙴᘅᘕᘥ</em>
<span class="comment">ᙕᙥᙵᘆᘖᘦᘶᙆᙖᙦᙶᚆᘇᘗᘧᘷᙇᙗᙧ,ᘈᘘᘨ</span>
ᘸᙈᙘᙨᘉᘙᘩᘹᙉᙙᙩᘊᘚᘪᘺᙊᙚᙪᘋᘛᘫᘻᙋ
<span class="comment">ᙛᙫᘌᘜᘬᘼᙌᙜᙬᘍᘝᘭᘽᙍᙝ᙭ᘎᘞᘮᘾᙎᙞ᙮ᘏᘟ</span>
<em>ᘯᘿᙏᙟᙯᔀᔐᔠᔰᕀᕐᕠᕰᖀᖐᖠᖰᗀᗐᗠᗰᔁᔑᔡᔱ</em>
<strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
</p></div>
      </div><div class="content" id="slide-85">
       <div class="container"><h1><em>BlueEyes</em></h1><p><a href="https://github.com/jdegoes/blueeyes" ><em class="hc">https://github.com/jdegoes/blueeyes</em></a>
</p></div>
      </div><div class="content" id="slide-86">
       <div class="container"><p><strong>あばばばばばばばば</strong>
</p></div>
      </div><div class="content" id="slide-87">
       <div class="container"><p><em>(　ﾟ∀ﾟ)o彡°おっぱい！おっぱい！</em>
</p></div>
      </div><div class="content" id="slide-88">
       <div class="container"><style type="text/css">
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
.Constant { color: #ff6060; }
.Special { color: #ff40ff; }
.Statement { color: #ffff00; }
-->
</style>
<code class="small">
<span>trait</span> <em>EmailServices</em> <span>extends</span> <em>BlueEyesServiceBuilder</em> {
 <span>val</span> emailService = service(<span class="Constant">&quot;email&quot;</span>, <span class="Constant">&quot;1.32&quot;</span>) { context <span>=&gt;</span>
   startup {
     loadContactList(context.config(<span class="Constant">&quot;contactFile&quot;</span>))
   } -&gt;
   request { contactList <span>=&gt;</span>
     path(<span class="Constant">&quot;/emails/&quot;</span>) {
       contentType(application/json) {
          get { request <span>=&gt;</span>
            ...
            Future.sync(
                <em>HttpResponse</em>(
                  content = <em>Some</em>(<em>JArray</em>(emailIds))))
          } ~
          path(<em>'emailId</em>) {
            get { request <span>=&gt;</span>
              <span>val</span> emailId = request.parameters(<em>'emailId</em>)
              ...
              Future.sync(
                  <em>HttpResponse</em>(content = <em>Some</em>(emailObj)))
            }
          }
       }
     }
   } -&gt;
   shutdown { contactList <span>=&gt;</span>
     contactList.finalize
   }
 }
}
<span>object</span> <em>EmailServer</em> <span>extends</span> <em>BlueEyesServer</em> <span>with</span> <em>EmailServices</em>
</code>
</div>
      </div><div class="content" id="slide-89">
       <div class="container"><p><strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
<em>ᙢᙲᘃᘓᘣᘳᙃᙓᙣᙳᘄᘔᘤᘴᙄᙔᙤᙴᘅᘕᘥ</em>
<span class="comment">ᙕᙥᙵᘆᘖᘦᘶᙆᙖᙦᙶᚆᘇᘗᘧᘷᙇᙗᙧ,ᘈᘘᘨ</span>
ᘸᙈᙘᙨᘉᘙᘩᘹᙉᙙᙩᘊᘚᘪᘺᙊᙚᙪᘋᘛᘫᘻᙋ
<span class="comment">ᙛᙫᘌᘜᘬᘼᙌᙜᙬᘍᘝᘭᘽᙍᙝ᙭ᘎᘞᘮᘾᙎᙞ᙮ᘏᘟ</span>
<em>ᘯᘿᙏᙟᙯᔀᔐᔠᔰᕀᕐᕠᕰᖀᖐᖠᖰᗀᗐᗠᗰᔁᔑᔡᔱ</em>
<strong>ᘀᘐᘠᘰᙀᙐᙠᙰᘁᘑᘡᘱᙁᙑᙡᙱᘂᘒᘢᘲᙂᙒ</strong>
</p></div>
      </div><div class="content" id="slide-90">
       <div class="container"><h2>Conclusion</h2></div>
      </div><div class="content" id="slide-91">
       <div class="container"><p><strong>Scala</strong> supports <em>parallel/concurrency</em> programing.
</p></div>
      </div><div class="content" id="slide-92">
       <div class="container"><p><strong>fp</strong> and <em>parallel/concurrency</em>
</p></div>
      </div><div class="content" id="slide-93">
       <div class="container"><p><strong>Asynchronous</strong> Frameworks/Toolkits
</p></div>
      </div><div class="content" id="slide-94">
       <div class="container"><p>questions?
</p></div>
      </div>
          </div>
        </div>
        <script type="text/javascript" src="js/custom.js?1314513776184"></script>
      </body>
    </html>